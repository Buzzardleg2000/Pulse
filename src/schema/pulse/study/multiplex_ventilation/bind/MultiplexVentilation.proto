syntax = "proto3";
package pulse.study.multiplex_ventilation.bind;
option java_package = "pulse.study.multiplex_ventilation.bind";
option csharp_namespace = "pulse.study.multiplex_ventilation.bind";
option optimize_for = SPEED;

message PatientStateData
{
  uint32          ID                                        = 1;
  string          StateFile                                 = 2;
  // Initial Conditions
  double          Compliance_mL_Per_cmH2O                   = 3;
  double          Resistance_cmH2O_s_Per_L                  = 4;
  double          ImpairmentFraction                        = 5;
  // Ventilator Settings
  double          RespirationRate_Per_min                   = 6;
  double          IERatio                                   = 7;
  double          PEEP_cmH2O                                = 8;
  double          PIP_cmH2O                                 = 9;
  double          FiO2                                      = 10;
  // Vitals
  double          AirwayFlow_L_Per_min                      = 11;
  double          AirwayPressure_cmH2O                      = 12;
  double          ArterialCarbonDioxidePartialPressure_mmHg = 13;
  double          ArterialOxygenPartialPressure_mmHg        = 14;
  double          CarricoIndex_mmHg                         = 15;
  double          EndTidalCarbonDioxidePressure_cmH2O       = 16;
  double          IdealBodyWeight_kg                        = 17;
  double          MeanAirwayPressure_cmH2O                  = 18;
  double          OxygenationIndex                          = 19;
  double          OxygenSaturation                          = 20;
  double          OxygenSaturationIndex_cmH2O               = 21;
  double          SFRatio                                   = 22;
  double          TidalVolume_mL                            = 23;
  double          TotalLungVolume_mL                        = 24;
  // Stabilization Information
  bool            AchievedStabilization                     = 25;
  double          OxygenSaturationStabilizationTrend        = 27;
}

message PatientStateListData
{
  repeated PatientStateData      Patients                   = 1;
}

message PatientComparisonData
{
  PatientStateData               SoloVentilation            = 1;
  PatientStateData               MultiplexVentilation       = 2;
}

message LogData
{
  repeated string                Info                       = 1;
  repeated string                Warning                    = 2;
  repeated string                Error                      = 3;
  repeated string                Fatal                      = 4;
}

message SimulationData
{
  // A filename without an extension (can/should have path also)
  // The engine will use this to create multiple output files (*.log and *.csv)
  uint32                         ID                         = 1;
  uint32                         GroupID                    = 2;
  string                         OutputBaseFilename         = 3;
  bool                           AchievedStabilization      = 4;
  double                         StabilizationTime_s        = 5;
  double                         RespirationRate_Per_min    = 6;
  double                         IERatio                    = 7;
  double                         PIP_cmH2O                  = 8;
  double                         PEEP_cmH2O                 = 9;
  double                         FiO2                       = 10;
  LogData                        Log                        = 11;
  repeated PatientComparisonData PatientComparisons         = 12;
}

message SimulationListData
{
  string                         OutputRootDir              = 1;
  repeated SimulationData        Simulations                = 2;
}
